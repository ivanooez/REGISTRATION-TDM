<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <title>–ê–¥–º–∏–Ω - –£—á–∞—Å—Ç–Ω–∏—Ü–∏</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1f1c2c, #928dab);
      color: #fff;
      padding: 20px;
      margin: 0;
      animation: fadeInBody 2s ease;
    }
    h2 {
      color: #00ffe7;
      text-shadow: 0 0 10px #00ffe7;
      animation: glowTitle 3s infinite alternate;
    }
    ul {
      list-style-type: none;
      padding-left: 0;
    }
    li {
      background: rgba(0, 0, 0, 0.6);
      margin: 10px 0;
      padding: 10px;
      border-left: 4px solid #00ffe7;
      box-shadow: 0 0 10px rgba(0, 255, 231, 0.5);
      animation: slideInLeft 0.5s ease;
    }
    input.kills {
      width: 40px;
      margin-left: 5px;
      border-radius: 6px;
      border: none;
      padding: 4px;
    }
    select,
    button {
      margin: 10px 5px 10px 0;
      padding: 10px;
      border-radius: 8px;
      border: none;
      font-weight: bold;
      cursor: pointer;
      background: #00ffe7;
      color: #000;
      animation: pulseBtn 1.5s infinite;
      transition: background 0.3s;
    }
    button:hover,
    select:hover {
      background: #00ccff;
    }
    #–º–∞—á–æ–≤–µ div {
      background: rgba(0, 0, 0, 0.5);
      margin: 10px 0;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 15px #00ffe7;
      animation: popIn 0.6s ease;
    }
    #–ø–æ–±–µ–¥–∏—Ç–µ–ª {
      font-size: 24px;
      color: #a0ffb3;
      font-weight: bold;
      margin-top: 20px;
      animation: successGlow 2s infinite alternate;
    }
    @keyframes fadeInBody {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    @keyframes glowTitle {
      from {
        text-shadow: 0 0 10px #00ffe7;
      }
      to {
        text-shadow: 0 0 20px #00ffe7, 0 0 30px #00d4ff;
      }
    }
    @keyframes slideInLeft {
      from {
        transform: translateX(-100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    @keyframes pulseBtn {
      0% {
        box-shadow: 0 0 0 0 rgba(0, 255, 231, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(0, 255, 231, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(0, 255, 231, 0);
      }
    }
    @keyframes popIn {
      0% {
        transform: scale(0.95);
        opacity: 0;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    @keyframes successGlow {
      from {
        text-shadow: 0 0 5px #00ff99;
      }
      to {
        text-shadow: 0 0 20px #00ff99;
      }
    }
  </style>
</head>
<body>
  <h2>–£—á–∞—Å—Ç–Ω–∏—Ü–∏</h2>
  <ul id="—É—á–∞—Å—Ç–Ω–∏—Ü–∏-—Å–ø–∏—Å—ä–∫"></ul>
  <label for="–±—Ä–æ–π-—É—á–∞—Å—Ç–Ω–∏—Ü–∏">–ò–∑–±–µ—Ä–∏ –±—Ä–æ–π —É—á–∞—Å—Ç–Ω–∏—Ü–∏:</label>
  <select id="–±—Ä–æ–π-—É—á–∞—Å—Ç–Ω–∏—Ü–∏">
    <option value="8">8</option>
    <option value="16">16</option>
    <option value="32">32</option>
  </select>
  <button onclick="—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π–¢—É—Ä–Ω–∏—Ä()">–°—Ç–∞—Ä—Ç–∏—Ä–∞–π —Ç—É—Ä–Ω–∏—Ä</button>
  <button onclick="–∏–∑—á–∏—Å—Ç–∏–£—á–∞—Å—Ç–Ω–∏—Ü–∏—Ç–µ()">–ò–∑—Ç—Ä–∏–π –≤—Å–∏—á–∫–∏ —É—á–∞—Å—Ç–Ω–∏—Ü–∏</button>
  <button onclick="–µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π–£—á–∞—Å—Ç–Ω–∏—Ü–∏()">–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –≤ JSON</button>
  <a id="download-link" style="display: none;"></a>
  <div id="–º–∞—á–æ–≤–µ"></div>
  <div id="–ø–æ–±–µ–¥–∏—Ç–µ–ª"></div>
  <script>
    const —Å–ø–∏—Å—ä–∫ = document.getElementById('—É—á–∞—Å—Ç–Ω–∏—Ü–∏-—Å–ø–∏—Å—ä–∫');
    let —É—á–∞—Å—Ç–Ω–∏—Ü–∏ = (JSON.parse(localStorage.getItem('—É—á–∞—Å—Ç–Ω–∏—Ü–∏')) || []).filter(
      (e) => e && e.name && e.id && !e.id.startsWith('BOT')
    );
    —É—á–∞—Å—Ç–Ω–∏—Ü–∏.forEach((entry) => {
      const li = document.createElement('li');
      li.textContent = `–ò–≥—Ä–∞—á: ${entry.name} | PUBG ID: ${entry.id}`;
      —Å–ø–∏—Å—ä–∫.appendChild(li);
    });
    function –∏–∑—á–∏—Å—Ç–∏–£—á–∞—Å—Ç–Ω–∏—Ü–∏—Ç–µ() {
      localStorage.removeItem('—É—á–∞—Å—Ç–Ω–∏—Ü–∏');
      alert('–£—á–∞—Å—Ç–Ω–∏—Ü–∏—Ç–µ —Å–∞ –∏–∑—Ç—Ä–∏—Ç–∏.');
      location.reload();
    }
    function –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π–£—á–∞—Å—Ç–Ω–∏—Ü–∏() {
      const —É—á–∞—Å—Ç–Ω–∏—Ü–∏ = JSON.parse(localStorage.getItem('—É—á–∞—Å—Ç–Ω–∏—Ü–∏')) || [];
      const dataStr =
        'data:text/json;charset=utf-8,' +
        encodeURIComponent(JSON.stringify(—É—á–∞—Å—Ç–Ω–∏—Ü–∏, null, 2));
      const downloadAnchorNode = document.getElementById('download-link');
      downloadAnchorNode.setAttribute('href', dataStr);
      downloadAnchorNode.setAttribute('download', 'uchastnici.json');
      downloadAnchorNode.click();
    }
    let –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏ = [];
    let —Ç–µ–∫—É—â–ö—Ä—ä–≥ = 1;
    let –º–∞–∫—Å–∏–º–∞–ª–µ–Ω–ë—Ä–æ–π = 0;
    function —Ä–∞–∑–º–µ—Å–∏(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }
    function —Å—Ç–∞—Ä—Ç–∏—Ä–∞–π–¢—É—Ä–Ω–∏—Ä() {
      —Ç–µ–∫—É—â–ö—Ä—ä–≥ = 1;
      –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏ = —Ä–∞–∑–º–µ—Å–∏([...—É—á–∞—Å—Ç–Ω–∏—Ü–∏]).slice(
        0,
        parseInt(document.getElementById('–±—Ä–æ–π-—É—á–∞—Å—Ç–Ω–∏—Ü–∏').value)
      );
      –º–∞–∫—Å–∏–º–∞–ª–µ–Ω–ë—Ä–æ–π = –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏.length;
      —Å–ª–µ–¥–≤–∞—â–ö—Ä—ä–≥();
    }
    function —Å–ª–µ–¥–≤–∞—â–ö—Ä—ä–≥() {
      const –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä = document.getElementById('–º–∞—á–æ–≤–µ');
      –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.innerHTML = `<h3>–ö—Ä—ä–≥ ${—Ç–µ–∫—É—â–ö—Ä—ä–≥}</h3>`;
      const —Ç–µ–∫—É—â–∏ = [...–ø–æ–±–µ–¥–∏—Ç–µ–ª–∏];
      –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏ = [];
      for (let i = 0; i < —Ç–µ–∫—É—â–∏.length; i += 2) {
        if (!—Ç–µ–∫—É—â–∏[i] || !—Ç–µ–∫—É—â–∏[i + 1]) continue;
        const id1 = `r${—Ç–µ–∫—É—â–ö—Ä—ä–≥}_${i}`;
        const id2 = `r${—Ç–µ–∫—É—â–ö—Ä—ä–≥}_${i + 1}`;
        const div = document.createElement('div');
        div.innerHTML = `
          ${—Ç–µ–∫—É—â–∏[i].name} vs ${—Ç–µ–∫—É—â–∏[i + 1].name}
          <br />–ö–∏–ª–æ–≤–µ:
          <input type="number" class="kills" id="${id1}" min="0" />
          <input type="number" class="kills" id="${id2}" min="0" />
          <button onclick="–∏–∑–±–µ—Ä–∏–ü–æ–ö–∏–ª–æ–≤–µ('${—Ç–µ–∫—É—â–∏[i].name}', '${—Ç–µ–∫—É—â–∏[i + 1].name}', '${id1}', '${id2}', this.parentElement)">–ò–∑–±–µ—Ä–∏ –ø–æ –∫–∏–ª–æ–≤–µ</button>
        `;
        –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.appendChild(div);
      }
    }
    function –∏–∑–±–µ—Ä–∏–ü–æ–ö–∏–ª–æ–≤–µ(name1, name2, id1, id2, container) {
      const k1 = parseInt(document.getElementById(id1).value) || 0;
      const k2 = parseInt(document.getElementById(id2).value) || 0;
      let –ø–æ–±–µ–¥–∏—Ç–µ–ª = k1 > k2 ? name1 : name2;
      if (k1 === k2) –ø–æ–±–µ–¥–∏—Ç–µ–ª = name1;
      –¥–æ–±–∞–≤–∏–ü–æ–±–µ–¥–∏—Ç–µ–ª(–ø–æ–±–µ–¥–∏—Ç–µ–ª, container);
    }
    function –¥–æ–±–∞–≤–∏–ü–æ–±–µ–¥–∏—Ç–µ–ª(–∏–º–µ, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) {
      –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏.push({ name: –∏–º–µ });
      –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.innerHTML += ` ‚úÖ –ü–æ–±–µ–¥–∏—Ç–µ–ª: ${–∏–º–µ}`;
      –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.querySelectorAll('button').forEach((btn) => (btn.disabled = true));
      const –æ–±—â–æ–ú–∞—á–æ–≤–µ = –º–∞–∫—Å–∏–º–∞–ª–µ–Ω–ë—Ä–æ–π / Math.pow(2, —Ç–µ–∫—É—â–ö—Ä—ä–≥);
      if (–ø–æ–±–µ–¥–∏—Ç–µ–ª–∏.length >= –æ–±—â–æ–ú–∞—á–æ–≤–µ) {
        if (–ø–æ–±–µ–¥–∏—Ç–µ–ª–∏.length === 1) {
          –ø–æ–∫–∞–∑–∞–π–ü–æ–±–µ–¥–∏—Ç–µ–ª(–ø–æ–±–µ–¥–∏—Ç–µ–ª–∏[0].name);
        } else {
          —Ç–µ–∫—É—â–ö—Ä—ä–≥++;
          setTimeout(—Å–ª–µ–¥–≤–∞—â–ö—Ä—ä–≥, 500);
        }
      }
    }
    function –ø–æ–∫–∞–∑–∞–π–ü–æ–±–µ–¥–∏—Ç–µ–ª(–∏–º–µ) {
      const div = document.getElementById('–ø–æ–±–µ–¥–∏—Ç–µ–ª');
      div.innerHTML = `üèÜ –ü–û–ë–ï–î–ò–¢–ï–õ: ${–∏–º–µ} üèÜ<br>–°–≤—ä—Ä–∂–∏ —Å–µ —Å –∞–¥–º–∏–Ω –∑–∞ –Ω–∞–≥—Ä–∞–¥–∞—Ç–∞ —Å–∏ –æ—Ç 100 –ª–≤. –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è!`;
    }
  </script>
</body>
</html>
